<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dark Web Intelligence Feed - WatchLockAI</title>
  <style>
    /* Versedetect Color Scheme */
    :root {
      --bg: #0f1114;
      --panel: #151821;
      --panel-soft: #1b1f2a;
      --panel-elevated: #1c202d;
      --text-primary: #e8ecf1;
      --text-muted: #a7b0bf;
      --text-subtle: #7b8496;
      --brand: #5aa9ff;
      --brand-strong: #7bbcff;
      --brand-alt: #7ee787;
      --danger: #ff6b7a;
      --warn: #ffb86b;
      --border: #2a2f3a;
      --bg-secondary: #1a1e28;
      --text-secondary: #8b92a0;
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 22px;
      --shadow-md: 0 12px 30px rgba(0, 0, 0, 0.35);
      --shadow-lg: 0 22px 45px rgba(0, 0, 0, 0.45);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      margin: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Skip to content link for accessibility */
    .skip-to-content {
      position: absolute;
      left: -9999px;
      z-index: 999;
      padding: 1rem;
      background: var(--brand);
      color: #000;
      text-decoration: none;
      border-radius: var(--radius-sm);
      font-weight: 600;
    }

    .skip-to-content:focus {
      left: 1rem;
      top: 1rem;
    }

    /* Header Navigation */
    .site-header {
      background: var(--bg);
      border-bottom: 1px solid var(--border-subtle);
      position: sticky;
      top: 0;
      z-index: 100;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 2rem;
    }

    .site-logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: color 0.2s;
    }

    .site-logo:hover {
      color: var(--brand);
    }

    .site-logo-icon {
      font-size: 1.5rem;
    }

    /* Mobile menu toggle */
    .mobile-menu-toggle {
      display: none;
      background: none;
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      padding: 0.5rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 1.25rem;
      transition: all 0.2s;
    }

    .mobile-menu-toggle:hover {
      border-color: var(--brand);
      color: var(--brand);
    }

    .nav-menu {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      list-style: none;
    }

    .nav-menu-spaced {
      gap: 1rem;
    }

    .nav-link {
      color: var(--text-muted);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: all 0.2s;
    }

    .nav-link:hover,
    .nav-link.active {
      color: var(--brand);
      background: rgba(90, 169, 255, 0.1);
    }

    .nav-link:focus {
      outline: 2px solid var(--brand);
      outline-offset: 2px;
    }

    /* Back Link */
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--brand);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-sm);
      background: rgba(90, 169, 255, 0.1);
      border: 1px solid rgba(90, 169, 255, 0.3);
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.2s;
      margin-bottom: 1.5rem;
    }

    .back-link:hover {
      background: rgba(90, 169, 255, 0.2);
      border-color: var(--brand);
    }

    .back-link:focus {
      outline: 2px solid var(--brand);
      outline-offset: 2px;
    }

    /* Main Content */
    .main-content {
      flex: 1;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .filter-bar {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
      padding: 20px;
      background: var(--panel-soft);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .filter-select,
    .search-input {
      padding: 10px 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-size: 0.95rem;
      transition: all 0.2s;
    }

    .filter-select:focus,
    .search-input:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(90, 169, 255, 0.1);
    }

    .search-box {
      grid-column: span 2;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 24px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    .stat-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .stat-number {
      font-size: 2.5em;
      font-weight: bold;
      margin: 10px 0;
      color: var(--text-primary);
    }

    .stat-label {
      font-size: 0.9em;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-red { border-left: 4px solid var(--danger); }
    .stat-orange { border-left: 4px solid var(--warn); }
    .stat-blue { border-left: 4px solid var(--brand); }
    .stat-green { border-left: 4px solid var(--brand-alt); }

    .victim-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
      gap: 24px;
      margin-top: 20px;
    }

    .victim-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 24px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .victim-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
      border-color: var(--brand);
    }

    .victim-card.severity-critical {
      border-color: var(--danger);
      box-shadow: 0 0 20px rgba(255, 107, 122, 0.15);
    }

    .victim-card.severity-high {
      border-color: var(--warn);
    }

    .victim-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .victim-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 5px;
    }

    .victim-domain {
      font-size: 0.9rem;
      color: var(--text-muted);
      font-family: 'Courier New', monospace;
    }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-critical {
      background: var(--danger);
      color: white;
    }

    .badge-high {
      background: var(--warn);
      color: var(--bg);
    }

    .badge-medium {
      background: var(--brand);
      color: white;
    }

    .badge-new {
      background: var(--brand-alt);
      color: var(--bg);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .victim-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .meta-icon {
      font-size: 1.1em;
    }

    .victim-description {
      color: var(--text-muted);
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .victim-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 15px;
      border-top: 1px solid var(--border);
    }

    .ransomware-group {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: var(--danger);
    }

    .date-posted {
      font-size: 0.85rem;
      color: var(--text-subtle);
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      overflow: auto;
      animation: fadeIn 0.2s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: var(--panel);
      margin: 40px auto;
      padding: 0;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      max-width: 900px;
      box-shadow: var(--shadow-lg);
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      padding: 30px;
      padding-right: 70px;
      border-bottom: 1px solid var(--border);
      position: relative;
    }

    .modal-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 10px;
    }

    .modal-subtitle {
      color: var(--text-muted);
      font-size: 1rem;
    }

    .close {
      position: absolute;
      right: 20px;
      top: 20px;
      color: var(--text-muted);
      font-size: 32px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.2s;
      line-height: 1;
      z-index: 1000;
      pointer-events: auto;
    }

    .close:hover {
      color: var(--danger);
    }

    .modal-body {
      padding: 30px;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
    }

    .modal-section {
      margin-bottom: 30px;
    }

    .modal-section:last-child {
      margin-bottom: 0;
    }

    .modal-section-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .modal-section-content {
      color: var(--text-muted);
      line-height: 1.8;
    }

    .timeline {
      border-left: 2px solid var(--border);
      padding-left: 20px;
      margin-left: 10px;
    }

    .timeline-item {
      margin-bottom: 20px;
      position: relative;
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: -26px;
      top: 5px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--brand);
      border: 2px solid var(--bg);
    }

    .timeline-date {
      font-weight: 600;
      color: var(--brand);
      margin-bottom: 5px;
    }

    .timeline-event {
      color: var(--text-muted);
    }

    .ioc-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .ioc-item {
      background: var(--bg);
      padding: 12px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: var(--text-primary);
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag {
      background: var(--panel-soft);
      color: var(--text-primary);
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      border: 1px solid var(--border);
    }

    @media (max-width: 768px) {
      .victim-grid {
        grid-template-columns: 1fr !important;
      }

      .filter-bar {
        grid-template-columns: 1fr;
      }

      .search-box {
        grid-column: span 1;
      }

      .mobile-menu-toggle {
        display: block;
      }

      .nav-menu {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--panel);
        border-bottom: 1px solid var(--border-subtle);
        flex-direction: column;
        padding: 1rem;
        gap: 0.5rem;
      }

      .nav-menu.active {
        display: flex;
      }

      .nav-link {
        width: 100%;
        text-align: left;
      }
    }

    /* Footer Styles */
    .site-footer {
      background: var(--panel);
      border-top: 1px solid var(--border-subtle);
      padding: 2rem 0;
      margin-top: 4rem;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: start;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .footer-brand {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .footer-description {
      color: var(--text-muted);
      font-size: 0.875rem;
      max-width: 32rem;
      line-height: 1.6;
    }

    .footer-links {
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .footer-link {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.2s;
    }

    .footer-link:hover {
      color: var(--brand);
    }
  </style>
</head>
<body>
  <a href="#main" class="skip-to-content">Skip to content</a>

  <!-- Header Navigation -->
  <header class="site-header">
    <div class="header-container">
      <a href="index.html" class="site-logo">
        <span class="site-logo-icon">üîí</span>
        <span>WatchLockAI</span>
      </a>

      <button type="button" class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
        ‚ò∞
      </button>

      <nav class="nav-menu nav-menu-spaced" id="navMenu">
        <a href="index.html" class="nav-link">Home</a>
        <a href="apt-profiles.html" class="nav-link">APT Profiles</a>
        <a href="geopolitical-map.html" class="nav-link">Geo Map</a>
        <a href="dark-web-intel.html" class="nav-link active">Dark Web Intel</a>
        <a href="detections.html" class="nav-link">Detections</a>
        <a href="breach-attack-simulation.html" class="nav-link">BAS Matching</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main" class="main-content">
    <div class="container">
      <!-- Back Link -->
      <a href="/" class="back-link">
        <span>‚Üê</span>
        <span>Back to Dashboard</span>
      </a>

      <!-- Page Header -->
      <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem; font-weight: 700;">Dark Web Intelligence</h1>
      <p class="tagline" style="color: var(--text-muted); margin-bottom: 2rem; font-size: 1.125rem;">Ransomware Leak Site Monitoring</p>

      <div class="filter-bar">
        <div class="filter-group search-box">
          <label class="filter-label">Search</label>
          <input type="text" id="searchInput" class="search-input" placeholder="Search by organization name or domain...">
        </div>
        <div class="filter-group">
          <label for="ransomwareFilter" class="filter-label">Ransomware Group</label>
          <select id="ransomwareFilter" class="filter-select">
            <option value="">All Groups</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="industryFilter" class="filter-label">Industry</label>
          <select id="industryFilter" class="filter-select">
            <option value="">All Industries</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="severityFilter" class="filter-label">Severity</label>
          <select id="severityFilter" class="filter-select">
            <option value="">All Severities</option>
            <option value="critical">Critical</option>
            <option value="high">High</option>
            <option value="medium">Medium</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="dateFilter" class="filter-label">Date Range</label>
          <select id="dateFilter" class="filter-select">
            <option value="">All Time</option>
            <option value="7">Last 7 Days</option>
            <option value="30">Last 30 Days</option>
            <option value="90">Last 90 Days</option>
          </select>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card stat-red">
          <div class="stat-icon">üö®</div>
          <div class="stat-number" id="totalVictims">0</div>
          <div class="stat-label">Total Victims</div>
        </div>
        <div class="stat-card stat-orange">
          <div class="stat-icon">üî•</div>
          <div class="stat-number" id="activeGroups">0</div>
          <div class="stat-label">Active Groups</div>
        </div>
        <div class="stat-card stat-blue">
          <div class="stat-icon">üè¢</div>
          <div class="stat-number" id="industriesAffected">0</div>
          <div class="stat-label">Industries</div>
        </div>
        <div class="stat-card stat-green">
          <div class="stat-icon">üìÖ</div>
          <div class="stat-number" id="recentBreaches">0</div>
          <div class="stat-label">Last 30 Days</div>
        </div>
      </div>

      <div id="victimGrid" class="victim-grid">
        <!-- Victim cards will be inserted here -->
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-container">
      <div>
        <p class="footer-brand">WatchLockAI</p>
        <p class="footer-description">Enterprise Threat Intelligence Platform - Built on the MITRE ATT&CK Framework. Open-source threat intelligence for security operations centers, threat intelligence teams, and incident response professionals.</p>
      </div>
      <div class="footer-links">
        <a href="https://github.com/tweakn74/APT-Tracker-MITRE-AIQ-Intel" class="footer-link">GitHub</a>
        <a href="apt-profiles.html" class="footer-link">APT Profiles</a>
        <a href="detections.html" class="footer-link">Detections</a>
        <a href="dark-web-intel.html" class="footer-link">Dark Web Intel</a>
      </div>
    </div>
  </footer>

  <!-- Breach Detail Modal -->
  <div id="breachModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close">&times;</span>
        <div id="modalHeader"></div>
      </div>
      <div class="modal-body">
        <div id="modalBody"></div>
      </div>
    </div>
  </div>

  <script type="module">
    let victimData = [];

    // Sample data (in production, this would come from API/database)
    const sampleVictims = [
      {
        id: 1,
        organization: "Acme Corporation",
        domain: "acme-corp.com",
        industry: "Manufacturing",
        ransomwareGroup: "LockBit 3.0",
        datePosted: "2025-11-01",
        severity: "critical",
        description: "Global manufacturing company with operations in 45 countries. Breach affects customer data and proprietary manufacturing processes.",
        estimatedImpact: "High - 50,000+ customer records",
        dataTypes: ["Customer PII", "Financial Records", "Intellectual Property", "Employee Data"],
        timeline: [
          { date: "2025-10-15", event: "Initial compromise detected" },
          { date: "2025-10-20", event: "Ransomware deployed across network" },
          { date: "2025-10-25", event: "Ransom demand issued ($5M)" },
          { date: "2025-10-28", event: "Posted to leak site" }
        ],
        iocs: [
          "192.168.1.100 - C2 Server",
          "malware.exe (SHA256: a1b2c3d4...)",
          "ransom-note.txt"
        ],
        status: "Active",
        isNew: true
      },
      {
        id: 2,
        organization: "TechStart Solutions",
        domain: "techstart.io",
        industry: "Technology",
        ransomwareGroup: "BlackCat (ALPHV)",
        datePosted: "2025-10-30",
        severity: "high",
        description: "Cloud services provider serving 200+ enterprise clients. Potential exposure of client infrastructure credentials.",
        estimatedImpact: "Medium - 10,000+ records",
        dataTypes: ["Client Credentials", "Source Code", "Business Documents"],
        timeline: [
          { date: "2025-10-10", event: "Phishing campaign initiated" },
          { date: "2025-10-18", event: "Lateral movement detected" },
          { date: "2025-10-22", event: "Data exfiltration (2.5TB)" },
          { date: "2025-10-25", event: "Leak site publication" }
        ],
        iocs: [
          "10.0.0.50 - Internal pivot point",
          "phish.pdf (SHA256: e5f6g7h8...)"
        ],
        status: "Active",
        isNew: true
      },
      {
        id: 3,
        organization: "HealthCare Plus",
        domain: "healthcareplus.com",
        industry: "Healthcare",
        ransomwareGroup: "Cl0p",
        datePosted: "2025-10-20",
        severity: "critical",
        description: "Regional healthcare provider with 15 hospitals. HIPAA-protected patient data compromised.",
        estimatedImpact: "Critical - 500,000+ patient records",
        dataTypes: ["Patient Medical Records", "Insurance Information", "SSN", "Payment Data"],
        timeline: [
          { date: "2025-09-28", event: "MOVEit vulnerability exploited" },
          { date: "2025-10-05", event: "Data exfiltration completed" },
          { date: "2025-10-15", event: "Ransom negotiation failed" },
          { date: "2025-10-20", event: "Patient data leaked" }
        ],
        iocs: [
          "moveit-exploit.ps1",
          "172.16.0.10 - Compromised server"
        ],
        status: "Active",
        isNew: false
      }
    ];

    function calculateSeverity(victim) {
      // In production, this would use more sophisticated logic
      if (victim.estimatedImpact.includes("Critical") || victim.estimatedImpact.includes("500,000")) {
        return "critical";
      } else if (victim.estimatedImpact.includes("High") || victim.estimatedImpact.includes("50,000")) {
        return "critical";
      } else {
        return "high";
      }
    }

    function isRecent(datePosted) {
      const posted = new Date(datePosted);
      const now = new Date();
      const daysSince = (now - posted) / (1000 * 60 * 60 * 24);
      return daysSince <= 10; // Changed from 7 to 10 to include both Acme and TechStart
    }

    async function loadVictimData() {
      try {
        // In production, fetch from API
        // const response = await fetch('/api/dark-web-victims');
        // victimData = await response.json();

        // For now, use sample data
        victimData = sampleVictims.map(victim => ({
          ...victim,
          severity: calculateSeverity(victim),
          isNew: isRecent(victim.datePosted)
        }));

        // Sort by date (most recent first)
        victimData.sort((a, b) => new Date(b.datePosted) - new Date(a.datePosted));

        // Populate filters
        populateFilters();
        renderVictimCards(victimData);
        updateStats();
      } catch (error) {
        console.error('Failed to load victim data:', error);
        document.getElementById('victimGrid').innerHTML = '<p style="color: var(--danger);">Failed to load victim data</p>';
      }
    }

    function populateFilters() {
      // Ransomware groups
      const groups = [...new Set(victimData.map(v => v.ransomwareGroup))].sort();
      const ransomwareFilter = document.getElementById('ransomwareFilter');
      groups.forEach(group => {
        const option = document.createElement('option');
        option.value = group;
        option.textContent = group;
        ransomwareFilter.appendChild(option);
      });

      // Industries
      const industries = [...new Set(victimData.map(v => v.industry))].sort();
      const industryFilter = document.getElementById('industryFilter');
      industries.forEach(industry => {
        const option = document.createElement('option');
        option.value = industry;
        option.textContent = industry;
        industryFilter.appendChild(option);
      });
    }

    function updateStats() {
      const totalVictims = victimData.length;
      const activeGroups = new Set(victimData.map(v => v.ransomwareGroup)).size;
      const industriesAffected = new Set(victimData.map(v => v.industry)).size;

      const thirtyDaysAgo = new Date();
      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
      const recentBreaches = victimData.filter(v => new Date(v.datePosted) >= thirtyDaysAgo).length;

      document.getElementById('totalVictims').textContent = totalVictims;
      document.getElementById('activeGroups').textContent = activeGroups;
      document.getElementById('industriesAffected').textContent = industriesAffected;
      document.getElementById('recentBreaches').textContent = recentBreaches;
    }

    function renderVictimCards(victims) {
      const grid = document.getElementById('victimGrid');
      grid.innerHTML = victims.map(victim => createVictimCard(victim)).join('');

      // Add click handlers
      document.querySelectorAll('.victim-card').forEach(card => {
        card.addEventListener('click', () => {
          const victimId = parseInt(card.dataset.id);
          const victim = victimData.find(v => v.id === victimId);
          if (victim) {
            showBreachModal(victim);
          }
        });
      });
    }

    function createVictimCard(victim) {
      const severityClass = `severity-${victim.severity}`;
      const newBadge = victim.isNew ? '<span class="badge badge-new">NEW</span>' : '';

      return `
        <div class="victim-card ${severityClass}" data-id="${victim.id}">
          <div class="victim-header">
            <div>
              <div class="victim-name">${victim.organization}</div>
              <div class="victim-domain">${victim.domain}</div>
            </div>
            <div>
              <span class="badge badge-${victim.severity}">${victim.severity}</span>
              ${newBadge}
            </div>
          </div>
          <div class="victim-meta">
            <div class="meta-item">
              <span class="meta-icon">üè¢</span>
              <span>${victim.industry}</span>
            </div>
            <div class="meta-item">
              <span class="meta-icon">üìä</span>
              <span>${victim.estimatedImpact}</span>
            </div>
          </div>
          <div class="victim-description">
            ${victim.description}
          </div>
          <div class="victim-footer">
            <div class="ransomware-group">
              <span>ü¶†</span>
              <span>${victim.ransomwareGroup}</span>
            </div>
            <div class="date-posted">Posted: ${formatDate(victim.datePosted)}</div>
          </div>
        </div>
      `;
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    function showBreachModal(victim) {
      const modal = document.getElementById('breachModal');
      const modalHeader = document.getElementById('modalHeader');
      const modalBody = document.getElementById('modalBody');

      modalHeader.innerHTML = `
        <h2 class="modal-title">${victim.organization}</h2>
        <p class="modal-subtitle">${victim.domain} ‚Ä¢ ${victim.industry}</p>
        <div style="margin-top: 15px;">
          <span class="badge badge-${victim.severity}">${victim.severity}</span>
          ${victim.isNew ? '<span class="badge badge-new">NEW</span>' : ''}
        </div>
      `;

      modalBody.innerHTML = `
        <div class="modal-section">
          <div class="modal-section-title">üìã Overview</div>
          <div class="modal-section-content">
            <p><strong>Description:</strong> ${victim.description}</p>
            <p><strong>Estimated Impact:</strong> ${victim.estimatedImpact}</p>
            <p><strong>Ransomware Group:</strong> ${victim.ransomwareGroup}</p>
            <p><strong>Date Posted:</strong> ${formatDate(victim.datePosted)}</p>
            <p><strong>Status:</strong> ${victim.status}</p>
          </div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">üìä Compromised Data Types</div>
          <div class="modal-section-content">
            <div class="tag-list">
              ${victim.dataTypes.map(type => `<span class="tag">${type}</span>`).join('')}
            </div>
          </div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">‚è±Ô∏è Breach Timeline</div>
          <div class="modal-section-content">
            <div class="timeline">
              ${victim.timeline.map(item => `
                <div class="timeline-item">
                  <div class="timeline-date">${formatDate(item.date)}</div>
                  <div class="timeline-event">${item.event}</div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">üîç Indicators of Compromise (IOCs)</div>
          <div class="modal-section-content">
            <div class="ioc-list">
              ${victim.iocs.map(ioc => `<div class="ioc-item">${ioc}</div>`).join('')}
            </div>
          </div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">üîó External References</div>
          <div class="modal-section-content">
            <p>‚Ä¢ <a href="#" style="color: var(--brand);">View on leak site (Tor required)</a></p>
            <p>‚Ä¢ <a href="#" style="color: var(--brand);">CISA Advisory</a></p>
            <p>‚Ä¢ <a href="#" style="color: var(--brand);">Threat Intelligence Report</a></p>
          </div>
        </div>
      `;

      modal.style.display = 'block';
    }

    function filterVictims() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const ransomwareGroup = document.getElementById('ransomwareFilter').value;
      const industry = document.getElementById('industryFilter').value;
      const severity = document.getElementById('severityFilter').value;
      const dateRange = document.getElementById('dateFilter').value;

      const filtered = victimData.filter(victim => {
        const matchesSearch = !searchTerm ||
          victim.organization.toLowerCase().includes(searchTerm) ||
          victim.domain.toLowerCase().includes(searchTerm);

        const matchesRansomware = !ransomwareGroup || victim.ransomwareGroup === ransomwareGroup;
        const matchesIndustry = !industry || victim.industry === industry;
        const matchesSeverity = !severity || victim.severity === severity;

        let matchesDate = true;
        if (dateRange) {
          const daysAgo = new Date();
          daysAgo.setDate(daysAgo.getDate() - parseInt(dateRange));
          matchesDate = new Date(victim.datePosted) >= daysAgo;
        }

        return matchesSearch && matchesRansomware && matchesIndustry && matchesSeverity && matchesDate;
      });

      renderVictimCards(filtered);
    }

    // Event listeners
    document.getElementById('searchInput').addEventListener('input', filterVictims);
    document.getElementById('ransomwareFilter').addEventListener('change', filterVictims);
    document.getElementById('industryFilter').addEventListener('change', filterVictims);
    document.getElementById('severityFilter').addEventListener('change', filterVictims);
    document.getElementById('dateFilter').addEventListener('change', filterVictims);

    // Modal event listeners
    const modal = document.getElementById('breachModal');
    const closeBtn = document.querySelector('.close');

    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    window.addEventListener('click', (event) => {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && modal.style.display === 'block') {
        modal.style.display = 'none';
      }
    });

    // Load data on page load
    loadVictimData();

    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const navMenu = document.getElementById('navMenu');

    mobileMenuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
    });
  </script>
</body>
</html>

